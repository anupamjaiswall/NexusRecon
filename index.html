<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>NexusRecon - Advanced Recon Framework</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;500;600;700&display=swap" rel="stylesheet" />
  <!-- Cyberpunk Favicon -->
  <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%230a0a1a;stroke:%2300ffdd;stroke-miterlimit:10;stroke-width:3px;%7D.cls-2%7Bfill:%23ff00c1;%7D%3C/style%3E%3C/defs%3E%3Cpath class='cls-1' d='M50,5A45,45,0,1,1,5,50,45,45,0,0,1,50,5Z'/%3E%3Ccircle class='cls-2' cx='50' cy='50' r='15'/%3E%3Cpath class='cls-1' d='M25,50a25,25,0,0,1,50,0'/%3E%3C/svg%3E" type="image/svg+xml">
  <style>
    @keyframes grid-pan {
      0% { background-position: 0% 0%; }
      100% { background-position: 100% 100%; }
    }

    body {
      font-family: 'Fira Code', monospace;
      background-color: #0a0a1a; /* Dark blue-black */
      color: #00ffdd; /* Bright Cyan */
      overflow-x: hidden;
      /* Cyberpunk grid background */
      background-image: 
        linear-gradient(to right, rgba(0, 221, 255, 0.1) 1px, transparent 1px),
        linear-gradient(to bottom, rgba(0, 221, 255, 0.1) 1px, transparent 1px);
      background-size: 40px 40px;
      animation: grid-pan 120s linear infinite;
      cursor: none; /* Hide the default cursor */
      text-shadow: 0 0 3px rgba(0, 255, 221, 0.4); /* Accessibility: Contrast */
    }
    
    a, button, .copy-btn, .hacker-btn {
        cursor: none;
    }

    .hacker-container {
        position: relative;
        border: 1px solid #ff00c1; /* Magenta */
        box-shadow: 0 0 15px rgba(255, 0, 193, 0.3), inset 0 0 10px rgba(255, 0, 193, 0.15);
        background-color: rgba(10, 10, 26, 0.85);
        backdrop-filter: blur(8px);
    }

    /* HUD Corner Brackets */
    .hacker-container::before, .hacker-container::after,
    .hacker-container > :first-child::before, .hacker-container > :first-child::after {
        content: '';
        position: absolute;
        width: 20px;
        height: 20px;
        border-color: #00ffdd; /* Bright Cyan */
        border-style: solid;
        transition: all 0.3s ease;
    }
    .hacker-container:hover::before, .hacker-container:hover::after,
    .hacker-container:hover > :first-child::before, .hacker-container:hover > :first-child::after {
        border-color: #ff00c1;
    }
    .hacker-container::before { top: -2px; left: -2px; border-width: 2px 0 0 2px; }
    .hacker-container::after { top: -2px; right: -2px; border-width: 2px 2px 0 0; }
    .hacker-container > :first-child::before { bottom: -2px; left: -2px; border-width: 0 0 2px 2px; }
    .hacker-container > :first-child::after { bottom: -2px; right: -2px; border-width: 0 2px 2px 0; }


    .glitch {
      font-weight: 700;
      position: relative;
      color: #00ffdd;
      text-shadow: 0 0 5px #00ffdd, 0 0 10px #00ffdd;
      animation: glitch-animation 5s infinite linear alternate-reverse;
    }

    .glitch::before,
    .glitch::after {
      content: attr(data-text);
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: #0a0a1a;
      overflow: hidden;
    }

    .glitch::before {
      left: 3px;
      text-shadow: -3px 0 #ff00c1; /* Magenta */
      animation: glitch-before 7s infinite linear alternate-reverse;
    }

    .glitch::after {
      left: -3px;
      text-shadow: -3px 0 #00ff41; /* Green */
      animation: glitch-after 3s infinite linear alternate-reverse;
    }

    @keyframes glitch-animation { 0% { clip-path: inset(23% 0 34% 0); } 100% { clip-path: inset(72% 0 15% 0); } }
    @keyframes glitch-before { 0% { clip-path: inset(0 0 100% 0); } 100% { clip-path: inset(90% 0 3% 0); } }
    @keyframes glitch-after { 0% { clip-path: inset(100% 0 0 0); } 100% { clip-path: inset(3% 0 90% 0); } }

    .hacker-input, .note-input, .workspace-textarea, .hacker-select {
        background-color: rgba(0, 221, 255, 0.05);
        border: 1px solid #00ffdd;
        color: #00ffdd;
        transition: all 0.3s ease;
    }
    
    /* Accessibility: Focus Indicators */
    .hacker-input:focus, .note-input:focus, .workspace-textarea:focus, .hacker-select:focus {
        outline: none;
        box-shadow: 0 0 10px #00ffdd, 0 0 15px #ff00c1;
        background-color: rgba(0, 221, 255, 0.1);
    }
    
    .hacker-btn:focus-visible, .tab-btn:focus-visible, .dork-item button:focus-visible {
        outline: none;
        box-shadow: 0 0 15px #ff00c1, 0 0 5px #ff00c1 inset;
    }

    .hacker-select option {
        background-color: #0a0a1a;
        color: #00ffdd;
    }

    .hacker-btn {
      background-color: transparent;
      border: 1px solid #00ffdd;
      color: #00ffdd;
      text-shadow: 0 0 5px #00ffdd;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
      will-change: transform;
    }
    .hacker-btn::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(120deg, transparent, rgba(0, 221, 255, 0.4), transparent);
        transition: all 0.5s;
    }
    .hacker-btn:hover::before {
        left: 100%;
    }
    .hacker-btn:hover {
        background-color: #00ffdd;
        color: #0a0a1a;
        box-shadow: 0 0 20px #00ffdd;
    }
    
    .category-title {
        color: #ff00c1;
        text-shadow: 0 0 8px #ff00c1;
    }
    
    .subcategory-title {
        color: #00ffdd;
        text-shadow: 0 0 5px #00ffdd;
    }

    .dork-item {
        background-color: transparent;
        border: 1px solid rgba(255, 0, 193, 0.5);
        transition: all 0.3s ease;
        position: relative;
    }
    .dork-item:hover {
        border-color: #ff00c1;
        box-shadow: 0 0 10px rgba(255, 0, 193, 0.5);
        transform: translateY(-3px);
    }
    .dork-text {
        color: #00ffdd;
    }
    .dork-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
        gap: 1rem;
    }
    
    @keyframes shake-error-animation {
      10%, 90% { transform: translateX(-1px); }
      20%, 80% { transform: translateX(2px); }
      30%, 50%, 70% { transform: translateX(-4px); }
      40%, 60% { transform: translateX(4px); }
    }

    .shake-error {
      animation: shake-error-animation 0.82s cubic-bezier(.36,.07,.19,.97) both;
    }
    
    .tab-btn {
        background-color: transparent;
        border: 1px solid #00ffdd;
        color: #00ffdd;
        transition: all 0.3s ease;
    }
    .tab-btn.active {
        background-color: #00ffdd;
        color: #0a0a1a;
        box-shadow: 0 0 15px #00ffdd;
    }

    /* Sidebar Styles */
    #sidebar {
        position: fixed;
        bottom: 1rem;
        left: 1rem;
        z-index: 1000;
        transition: all 0.5s cubic-bezier(0.25, 1, 0.5, 1);
        pointer-events: none; /* Make container non-interactive by default */
    }
    #sidebar.open {
        pointer-events: auto; /* Make container interactive when open */
    }
    #sidebar-toggle {
        pointer-events: auto; /* Always allow the toggle button to be clicked */
        transition: all 0.3s ease;
    }
    #sidebar-panel {
        transform: translateX(-120%);
        opacity: 0;
        pointer-events: none;
        width: 90vw;
        max-width: 500px;
        max-height: 80vh;
    }
    #sidebar.open #sidebar-panel {
        transform: translateX(0);
        opacity: 1;
        pointer-events: auto;
    }
    #sidebar.open #sidebar-toggle {
        transform: scale(0);
        opacity: 0;
    }

    /* Cyberpunk Live2D Cat Style */
    #live2d-widget canvas {
        filter: hue-rotate(220deg) saturate(1.5) drop-shadow(0 0 8px #ff00c1);
        transition: filter 0.5s ease;
    }
    #live2d-widget canvas:hover {
        filter: hue-rotate(280deg) saturate(2) drop-shadow(0 0 12px #00ffdd);
    }

    /* Disclaimer Modal Styles */
    .content-hidden {
        filter: blur(8px);
        pointer-events: none;
        transition: filter 0.3s ease;
    }

    /* --- Custom Cursor Styling --- */
    .cursor {
        width: 30px;
        height: 30px;
        border: 2px solid #ff00c1; /* Magenta border */
        border-radius: 50%;
        position: fixed; /* Use fixed positioning to stay in the viewport */
        pointer-events: none; /* Allows clicking through the cursor element */
        transform: translate(-50%, -50%); /* Center the cursor on the mouse pointer */
        z-index: 10000; /* Set a very high z-index */
        transition: transform 0.1s ease-out;
        box-shadow: 0 0 10px #ff00c1, 0 0 20px #ff00c1, inset 0 0 5px #ff00c1;
        display: flex;
        justify-content: center;
        align-items: center;
    }

    /* Create the crosshair effect using pseudo-elements */
    .cursor::before,
    .cursor::after {
        content: '';
        position: absolute;
        background-color: #00ffdd; /* Cyan crosshair */
        box-shadow: 0 0 5px #00ffdd, 0 0 10px #00ffdd;
    }

    .cursor::before {
        width: 2px;
        height: 10px;
    }

    .cursor::after {
        width: 10px;
        height: 2px;
    }
    
    /* --- Cursor Trail Styling --- */
    .trail {
        position: fixed;
        pointer-events: none;
        z-index: 9999; /* Slightly lower than the cursor itself */
        color: #00ff41; /* Green matrix glow for the trail */
        font-size: 1.2rem;
        text-shadow: 0 0 8px #00ff41;
        animation: fadeOut 0.8s forwards;
        transform: translate(-50%, -50%); /* Center the character */
    }

    /* Animation for the trail to fade and shrink */
    @keyframes fadeOut {
        from {
            opacity: 1;
            transform: translate(-50%, -50%) scale(1);
        }
        to {
            opacity: 0;
            transform: translate(-50%, -50%) scale(0.5);
        }
    }

    /* --- Click Animation Styling --- */
    .click-effect {
        width: 80px;
        height: 80px;
        border: 2px solid #ff00c1; /* Magenta */
        border-radius: 50%;
        position: fixed;
        pointer-events: none;
        transform: translate(-50%, -50%);
        z-index: 10001; /* Above cursor */
        opacity: 0; /* Start invisible */
        animation: click-animation 0.5s ease-out;
    }

    @keyframes click-animation {
      0% {
        transform: translate(-50%, -50%) scale(0);
        opacity: 1;
      }
      80% {
        transform: translate(-50%, -50%) scale(1);
        opacity: 0.5;
      }
      100% {
        transform: translate(-50%, -50%) scale(1.2);
        opacity: 0;
      }
    }

    /* --- Social Icons Styling --- */
    .social-icon {
        color: #00ffdd;
        transition: all 0.3s ease;
        filter: drop-shadow(0 0 5px #00ffdd);
    }
    .social-icon:hover {
        color: #ff00c1;
        transform: scale(1.1) rotate(5deg);
        filter: drop-shadow(0 0 15px #ff00c1);
    }

    /* --- Mobile Specific Styles --- */
    @media (max-width: 768px) {
      .cursor, .trail {
        display: none;
      }
      body, a, button, .copy-btn, .hacker-btn {
        cursor: auto;
      }
    }
  </style>
</head>
<body class="bg-gray-900 text-gray-200">

  <div class="cursor"></div>

  <div id="disclaimer-modal" class="fixed inset-0 bg-black/80 flex items-center justify-center z-[9998] backdrop-blur-sm">
      <div class="hacker-container rounded-lg p-6 w-full max-w-lg m-4 text-center">
          <div>
              <h2 class="category-title text-3xl mb-4">[ WARNING ]</h2>
              <p class="text-gray-300 mb-6">
                  This tool is intended for educational and authorized security testing purposes only.
                  Any actions and activities performed using NexusRecon are the sole responsibility of the user.
                  The creators of this tool are not responsible for any misuse or damage caused by this program.
                  Use responsibly and with proper authorization.
              </p>
              <button id="agree-btn" class="w-full hacker-btn font-bold py-3 px-6 rounded-md">
                  [ I Understand & Agree ]
              </button>
          </div>
      </div>
  </div>

  <div class="container mx-auto p-4 sm:px-6 md:px-8 py-8">
    <header class="text-center mb-10">
      <h1 class="glitch text-4xl sm:text-5xl" data-text="NexusRecon">NexusRecon</h1>
      <p class="text-cyan-400 mt-4 text-base sm:text-lg">[ Advanced Reconnaissance Framework ]</p>
    </header>

    <main id="main-content">
      <!-- Target Input Section -->
      <div class="mb-12 hacker-container p-6 rounded-lg">
        <div> <!-- This extra div is for the corner brackets -->
            <label class="block text-lg font-medium text-cyan-400 mb-2">// Select Recon Mode & Enter Target:</label>
            <div id="recon-mode-tabs" class="flex flex-wrap gap-2 mb-4">
                <button class="tab-btn active py-2 px-4 rounded-md" data-mode="website">Website Recon</button>
                <button class="tab-btn py-2 px-4 rounded-md" data-mode="user">User Recon</button>
            </div>
            <div class="flex flex-col sm:flex-row gap-4">
              <input type="text" id="target-input" placeholder="Enter Domain or Company..." class="w-full px-4 py-3 hacker-input rounded-md" />
              <button id="clear-target" class="bg-red-600/50 hover:bg-red-700 text-white font-bold py-3 px-6 rounded-md hacker-btn border-red-500">Clear</button>
            </div>
            <p id="error-message" class="text-red-400 mt-2 hidden"></p>
        </div>
      </div>

      <!-- Recon Modules -->
      <div class="space-y-10">

        <!-- Investigation Workspace & History Sidebar -->
        <div id="sidebar">
            <button id="sidebar-toggle" class="hacker-btn p-4 rounded-full">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                </svg>
            </button>
            <div id="sidebar-panel" class="hacker-container p-6 rounded-lg overflow-y-auto">
                <button id="sidebar-close" class="absolute top-2 right-2 text-cyan-400 hover:text-red-500">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                    </svg>
                </button>
                <div class="space-y-8">
                      <!-- Investigation Workspace -->
                      <div data-recon-type="all">
                          <h2 class="category-title text-2xl font-semibold border-b-2 border-fuchsia-500/50 pb-2 mb-4">>> Investigation Workspace</h2>
                          <div class="space-y-4">
                              <div>
                                  <div class="flex justify-between items-center mb-4">
                                      <p class="text-gray-400 text-sm">// Notes are saved per-target...</p>
                                      <button id="clear-workspace" class="hacker-btn text-xs p-2 border-red-500 text-red-400">[ Clear Workspace ]</button>
                                  </div>
                                  <div class="grid grid-cols-1 gap-4">
                                      <div>
                                          <label for="workspace-subdomains" class="block text-cyan-400 mb-2">Subdomains:</label>
                                          <textarea id="workspace-subdomains" rows="3" class="workspace-textarea w-full p-2 text-sm rounded-md" placeholder="example.com&#10;dev.example.com"></textarea>
                                      </div>
                                      <div>
                                          <label for="workspace-emails" class="block text-cyan-400 mb-2">Email Addresses:</label>
                                          <textarea id="workspace-emails" rows="3" class="workspace-textarea w-full p-2 text-sm rounded-md" placeholder="admin@example.com"></textarea>
                                      </div>
                                      <div>
                                          <label for="workspace-ips" class="block text-cyan-400 mb-2">IP Addresses:</label>
                                          <textarea id="workspace-ips" rows="3" class="workspace-textarea w-full p-2 text-sm rounded-md" placeholder="192.168.1.1"></textarea>
                                      </div>
                                      <div>
                                          <label for="workspace-urls" class="block text-cyan-400 mb-2">Interesting URLs:</label>
                                          <textarea id="workspace-urls" rows="3" class="workspace-textarea w-full p-2 text-sm rounded-md" placeholder="example.com/login.php"></textarea>
                                      </div>
                                      <div>
                                          <label for="workspace-notes" class="block text-cyan-400 mb-2">General Notes:</label>
                                          <textarea id="workspace-notes" rows="4" class="workspace-textarea w-full p-2 text-sm rounded-md" placeholder="Found potential vulnerability in..."></textarea>
                                      </div>
                                  </div>
                              </div>
                          </div>
                      </div>
                      <!-- Session History -->
                      <div data-recon-type="all">
                          <h2 class="category-title text-2xl font-semibold border-b-2 border-fuchsia-500/50 pb-2 mb-4">>> Session History</h2>
                          <div class="space-y-4">
                              <div>
                                  <div class="flex justify-between items-center">
                                      <p class="text-gray-400 text-sm">// Your activity is saved locally...</p>
                                      <button id="clear-history" class="hacker-btn text-xs p-2 border-red-500 text-red-400">[ Clear History ]</button>
                                  </div>
                                  <div id="history-container" class="mt-4 max-h-64 overflow-y-auto space-y-3 pr-2">
                                      <!-- History entries will be injected here -->
                                  </div>
                              </div>
                          </div>
                      </div>
                </div>
            </div>
        </div>

        <!-- Automated Recon Workflows -->
        <div data-recon-type="website">
            <h2 class="category-title text-2xl font-semibold border-b-2 border-fuchsia-500/50 pb-2 mb-4">>> Automated Recon Workflows</h2>
            <div class="space-y-10">
                <!-- Automated Target Profiler -->
                <div class="hacker-container p-6 rounded-lg space-y-4">
                    <div>
                        <h3 class="subcategory-title text-xl font-semibold mb-2">// Automated Target Profiler</h3>
                        <p class="text-gray-400 mb-4">// Run a sequence of essential dorks against the target...</p>
                        <button id="initiate-profile" class="w-full hacker-btn font-bold py-3 px-6 rounded-md">
                            [ Initiate Target Profile ]
                        </button>
                        <div id="profiler-results-container" class="hidden mt-4 pt-4 border-t border-fuchsia-500/50">
                            <p id="profiler-status" class="text-cyan-400 mb-4"></p>
                            <div id="profiler-results-list" class="space-y-2"></div>
                        </div>
                    </div>
                </div>
                <!-- Target Tech-Stack Identifier -->
                <div class="hacker-container p-6 rounded-lg space-y-4">
                    <div>
                        <h3 class="subcategory-title text-xl font-semibold mb-2">// Target Tech-Stack Identifier</h3>
                        <p class="text-gray-400 mb-4">// Run dorks to identify the target's technology stack...</p>
                        <button id="identify-tech" class="w-full hacker-btn font-bold py-3 px-6 rounded-md">
                            [ Identify Tech Stack ]
                        </button>
                        <div id="tech-results-container" class="hidden mt-4 pt-4 border-t border-fuchsia-500/50">
                            <p id="tech-status" class="text-cyan-400 mb-4"></p>
                            <div id="tech-results-list" class="space-y-2"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Manual Investigation Modules -->
        <div>
            <h2 class="category-title text-2xl font-semibold border-b-2 border-fuchsia-500/50 pb-2 mb-4">>> Manual Investigation Modules</h2>
            <div class="space-y-10">
                <!-- External Reconnaissance -->
                <div class="hacker-container p-6 rounded-lg space-y-6">
                    <div>
                        <h3 class="subcategory-title text-xl font-semibold mb-4">// OSINT & External Tools</h3>
                        <div class="dork-grid">
                            <button id="external-virustotal" class="hacker-btn p-3" data-recon-type="website" title="Analyze the target domain for malware and reputation.">[ VirusTotal ]</button>
                            <button id="external-censys" class="hacker-btn p-3" data-recon-type="website" title="Find hosts and networks belonging to the target.">[ Censys ]</button>
                            <button id="external-shodan" class="hacker-btn p-3" data-recon-type="website" title="Search for internet-connected devices and services.">[ Shodan ]</button>
                            <button id="external-netlas" class="hacker-btn p-3" data-recon-type="website" title="Explore internet intelligence data.">[ Netlas.io ]</button>
                            <button id="external-fofa" class="hacker-btn p-3" data-recon-type="website" title="Cyberspace asset search engine.">[ FOFA.so ]</button>
                            <button id="external-zoomeye" class="hacker-btn p-3" data-recon-type="website" title="Another cyberspace asset search engine.">[ ZoomEye ]</button>
                            <button id="external-securityheaders" class="hacker-btn p-3" data-recon-type="website" title="Check security-related HTTP headers.">[ SecurityHeaders.io ]</button>
                            <button id="external-crtsh" class="hacker-btn p-3" data-recon-type="website" title="Search for SSL/TLS certificates.">[ crt.sh ]</button>
                            <button id="external-dnsdumpster" class="hacker-btn p-3" data-recon-type="website" title="Find DNS records and subdomains.">[ DNSdumpster ]</button>
                            <button id="external-viewdns" class="hacker-btn p-3" data-recon-type="website" title="A suite of DNS and network tools.">[ ViewDNS.info ]</button>
                            <button id="external-whois" class="hacker-btn p-3" data-recon-type="website" title="Find domain registration information.">[ who.is ]</button>
                            <button id="external-rapiddns" class="hacker-btn p-3" data-recon-type="website" title="DNS query tool for subdomains and records.">[ RapidDNS ]</button>
                            <button id="external-github" class="hacker-btn p-3" data-recon-type="all" title="Search for code and secrets on GitHub.">[ GitHub ]</button>
                            <button id="external-pastebin" class="hacker-btn p-3" data-recon-type="all" title="Search for leaks on Pastebin and similar sites.">[ Pastebin ]</button>
                            <button id="external-leakix" class="hacker-btn p-3" data-recon-type="website" title="Search for publicly indexed leaks.">[ LeakIX ]</button>
                            <button id="external-grepapp" class="hacker-btn p-3" data-recon-type="all" title="Search across git repositories.">[ Grep.app ]</button>
                            <button id="external-searchcode" class="hacker-btn p-3" data-recon-type="all" title="Search for code across multiple sources.">[ Searchcode ]</button>
                            <button id="external-grayhat" class="hacker-btn p-3" data-recon-type="website" title="Search public S3 buckets.">[ Grayhat Warfare ]</button>
                            <button id="external-dehashed" class="hacker-btn p-3" data-recon-type="website" title="Search for credentials in data breaches.">[ Dehashed ]</button>
                            <button id="external-haveibeenpwned" class="hacker-btn p-3" data-recon-type="user" title="Check if an email has been in a data breach.">[ HaveIBeenPwned ]</button>
                            <button id="external-wayback" class="hacker-btn p-3" data-recon-type="website" title="Find archived versions of web pages.">[ Waybackurls ]</button>
                            <button id="external-urlscan" class="hacker-btn p-3" data-recon-type="website" title="Scan and analyze URLs.">[ urlscan.io ]</button>
                            <button id="external-builtwith" class="hacker-btn p-3" data-recon-type="website" title="Identify the technology stack of a website.">[ BuiltWith ]</button>
                            <button id="external-publicwww" class="hacker-btn p-3" data-recon-type="website" title="Find websites with specific code snippets.">[ PublicWWW ]</button>
                            <button id="external-hunter" class="hacker-btn p-3" data-recon-type="website" title="Find email addresses associated with a domain.">[ Hunter.io ]</button>
                            <button id="external-emailrep" class="hacker-btn p-3" data-recon-type="user" title="Check the reputation of an email address.">[ EmailRep.io ]</button>
                            <button id="external-linkedin" class="hacker-btn p-3" data-recon-type="all" title="Search for employees and company info.">[ LinkedIn Search ]</button>
                            <button id="external-crunchbase" class="hacker-btn p-3" data-recon-type="all" title="Find business information about companies.">[ Crunchbase ]</button>
                            <button id="external-greynoise" class="hacker-btn p-3" data-recon-type="website" title="Analyze internet-wide scan traffic.">[ GreyNoise ]</button>
                            <button id="external-whatsmynameweb" class="hacker-btn p-3" data-recon-type="user" title="Find usernames across many sites.">[ WhatsMyName ]</button>
                            <button id="external-truecaller" class="hacker-btn p-3" data-recon-type="user" title="Identify phone numbers.">[ Truecaller ]</button>
                            <button id="external-syncme" class="hacker-btn p-3" data-recon-type="user" title="Another phone number identification service.">[ Sync.me ]</button>
                            <button id="external-yandex" class="hacker-btn p-3" data-recon-type="all" title="Search engine with powerful image search.">[ Yandex ]</button>
                            <button id="external-ahmia" class="hacker-btn p-3" data-recon-type="all" title="Search engine for Tor hidden services.">[ Ahmia.fi (TOR) ]</button>
                        </div>
                    </div>
                </div>

                <!-- Visual Reconnaissance -->
                <div data-recon-type="website">
                    <h2 class="category-title text-2xl font-semibold border-b-2 border-fuchsia-500/50 pb-2 mb-4">>> Visual Recon (Favicon Pivoting)</h2>
                    <div class="hacker-container p-6 rounded-lg space-y-4">
                        <div>
                            <p class="text-gray-400">// Find related infrastructure by searching for the target's favicon hash on Shodan...</p>
                            <button id="favicon-pivot" class="w-full hacker-btn font-bold py-3 px-6 rounded-md mt-4">
                                [ Find by Favicon Hash (Shodan) ]
                            </button>
                            <p class="text-xs text-gray-500 mt-2">// Note: This is a conceptual search. For accurate results, calculate the MurmurHash3 of the favicon and search Shodan for `http.favicon.hash:<hash>`.</p>
                        </div>
                    </div>
                </div>

                <!-- Google Dorking Toggle -->
                <div class="hacker-container p-6 rounded-lg" data-recon-type="website">
                    <div>
                        <button id="toggle-dorking-modules" class="w-full hacker-btn p-3 font-bold text-xl">
                            [ Show Google Dorking Modules ]
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Collapsible Dorking Modules Container -->
        <div id="dorking-modules-container" class="hidden space-y-10" data-recon-type="website">
            
            <!-- Basic Recon -->
            <div>
              <h2 class="category-title text-2xl font-semibold border-b-2 border-fuchsia-500/50 pb-2 mb-4">>> Basic Recon Dorks</h2>
              <div class="dork-grid">
                <div class="dork-item p-2 flex items-center justify-between"><button class="w-full text-left p-2" data-dork='site:TARGET_DOMAIN'><span class="dork-text">All Indexed Pages</span></button><button class="copy-btn hacker-btn px-3 py-1 rounded-md text-sm">Copy</button></div>
                <div class="dork-item p-2 flex items-center justify-between"><button class="w-full text-left p-2" data-dork='site:*.TARGET_DOMAIN -site:www.TARGET_DOMAIN'><span class="dork-text">Subdomains</span></button><button class="copy-btn hacker-btn px-3 py-1 rounded-md text-sm">Copy</button></div>
                <div class="dork-item p-2 flex items-center justify-between"><button class="w-full text-left p-2" data-dork='site:TARGET_DOMAIN inurl:login | inurl:signin | intitle:"Login" | intitle:"Sign In"'><span class="dork-text">Login Pages</span></button><button class="copy-btn hacker-btn px-3 py-1 rounded-md text-sm">Copy</button></div>
                <div class="dork-item p-2 flex items-center justify-between"><button class="w-full text-left p-2" data-dork='site:TARGET_DOMAIN intitle:"index of"'><span class="dork-text">Open Directories</span></button><button class="copy-btn hacker-btn px-3 py-1 rounded-md text-sm">Copy</button></div>
              </div>
            </div>

            <!-- Credentials & Sensitive Keys -->
            <div>
                <h2 class="category-title text-2xl font-semibold border-b-2 border-fuchsia-500/50 pb-2 mb-4">>> Credentials & Sensitive Keys</h2>
                <div class="dork-grid">
                    <div class="dork-item p-2 flex items-center justify-between"><button class="w-full text-left p-2" data-dork='site:TARGET_DOMAIN "AWS_ACCESS_KEY_ID" "AKIA"'><span class="dork-text">AWS Keys</span></button><button class="copy-btn hacker-btn px-3 py-1 rounded-md text-sm">Copy</button></div>
                    <div class="dork-item p-2 flex items-center justify-between"><button class="w-full text-left p-2" data-dork='site:TARGET_DOMAIN "api_key" | "apikey"'><span class="dork-text">Exposed API Keys</span></button><button class="copy-btn hacker-btn px-3 py-1 rounded-md text-sm">Copy</button></div>
                    <div class="dork-item p-2 flex items-center justify-between"><button class="w-full text-left p-2" data-dork='site:TARGET_DOMAIN filetype:env "DB_PASSWORD"'><span class="dork-text">Public .env Files</span></button><button class="copy-btn hacker-btn px-3 py-1 rounded-md text-sm">Copy</button></div>
                    <div class="dork-item p-2 flex items-center justify-between"><button class="w-full text-left p-2" data-dork='site:TARGET_DOMAIN "password" filetype:log'><span class="dork-text">Passwords in Logs</span></button><button class="copy-btn hacker-btn px-3 py-1 rounded-md text-sm">Copy</button></div>
                    <div class="dork-item p-2 flex items-center justify-between"><button class="w-full text-left p-2" data-dork='site:TARGET_DOMAIN intitle:"index of" ".ssh"'><span class="dork-text">Exposed SSH Dirs</span></button><button class="copy-btn hacker-btn px-3 py-1 rounded-md text-sm">Copy</button></div>
                    <div class="dork-item p-2 flex items-center justify-between"><button class="w-full text-left p-2" data-dork='site:TARGET_DOMAIN inurl:id_rsa -github'><span class="dork-text">Exposed SSH Keys</span></button><button class="copy-btn hacker-btn px-3 py-1 rounded-md text-sm">Copy</button></div>
                </div>
            </div>
            
            <!-- Backup Files -->
            <div>
                <h2 class="category-title text-2xl font-semibold border-b-2 border-fuchsia-500/50 pb-2 mb-4">>> Backups & Database Dumps</h2>
                <div class="dork-grid">
                    <div class="dork-item p-2 flex items-center justify-between"><button class="w-full text-left p-2" data-dork='site:TARGET_DOMAIN ext:sql | ext:db | ext:mdb | ext:backup | ext:bak | ext:dump'><span class="dork-text">DB Backups & Dumps</span></button><button class="copy-btn hacker-btn px-3 py-1 rounded-md text-sm">Copy</button></div>
                    <div class="dork-item p-2 flex items-center justify-between"><button class="w-full text-left p-2" data-dork='site:TARGET_DOMAIN "Index of /" "backup"'><span class="dork-text">Backup Directories</span></button><button class="copy-btn hacker-btn px-3 py-1 rounded-md text-sm">Copy</button></div>
                    <div class="dork-item p-2 flex items-center justify-between"><button class="w-full text-left p-2" data-dork='site:TARGET_DOMAIN filetype:zip | filetype:tar "backup"'><span class="dork-text">Compressed Backups</span></button><button class="copy-btn hacker-btn px-3 py-1 rounded-md text-sm">Copy</button></div>
                </div>
            </div>

            <!-- Sensitive Files -->
            <div>
                <h2 class="category-title text-2xl font-semibold border-b-2 border-fuchsia-500/50 pb-2 mb-4">>> Sensitive Documents</h2>
                <div class="dork-grid">
                    <div class="dork-item p-2 flex items-center justify-between"><button class="w-full text-left p-2" data-dork='site:TARGET_DOMAIN "Internal use only" | "confidential"'><span class="dork-text">Internal / Confidential</span></button><button class="copy-btn hacker-btn px-3 py-1 rounded-md text-sm">Copy</button></div>
                    <div class="dork-item p-2 flex items-center justify-between"><button class="w-full text-left p-2" data-dork='site:TARGET_DOMAIN ext:pdf | ext:doc | ext:docx "invoice" "paid"'><span class="dork-text">Receipts & Invoices</span></button><button class="copy-btn hacker-btn px-3 py-1 rounded-md text-sm">Copy</button></div>
                    <div class="dork-item p-2 flex items-center justify-between"><button class="w-full text-left p-2" data-dork='site:TARGET_DOMAIN ext:xls | ext:xlsx "salary"'><span class="dork-text">Salary Spreadsheets</span></button><button class="copy-btn hacker-btn px-3 py-1 rounded-md text-sm">Copy</button></div>
                </div>
            </div>

            <!-- Vulnerable Files & Server Info -->
            <div>
                <h2 class="category-title text-2xl font-semibold border-b-2 border-fuchsia-500/50 pb-2 mb-4">>> Vulnerable Files & Server Info</h2>
                <div class="dork-grid">
                    <div class="dork-item p-2 flex items-center justify-between"><button class="w-full text-left p-2" data-dork='site:TARGET_DOMAIN intitle:"apache tomcat" "administration"'><span class="dork-text">Tomcat Admin</span></button><button class="copy-btn hacker-btn px-3 py-1 rounded-md text-sm">Copy</button></div>
                    <div class="dork-item p-2 flex items-center justify-between"><button class="w-full text-left p-2" data-dork='site:TARGET_DOMAIN intitle:"index of" "ws_ftp.log"'><span class="dork-text">WS_FTP Logs</span></button><button class="copy-btn hacker-btn px-3 py-1 rounded-md text-sm">Copy</button></div>
                    <div class="dork-item p-2 flex items-center justify-between"><button class="w-full text-left p-2" data-dork='site:TARGET_DOMAIN filetype:log "inurl:wp-content"'><span class="dork-text">WordPress Debug Logs</span></button><button class="copy-btn hacker-btn px-3 py-1 rounded-md text-sm">Copy</button></div>
                </div>
            </div>

            <!-- Test Endpoints & Errors -->
            <div>
                <h2 class="category-title text-2xl font-semibold border-b-2 border-fuchsia-500/50 pb-2 mb-4">>> Test Endpoints & Errors</h2>
                <div class="dork-grid">
                    <div class="dork-item p-2 flex items-center justify-between"><button class="w-full text-left p-2" data-dork='site:*.dev.TARGET_DOMAIN | site:*.stage.TARGET_DOMAIN | site:*.test.TARGET_DOMAIN'><span class="dork-text">Dev/Staging Subdomains</span></button><button class="copy-btn hacker-btn px-3 py-1 rounded-md text-sm">Copy</button></div>
                    <div class="dork-item p-2 flex items-center justify-between"><button class="w-full text-left p-2" data-dork='site:TARGET_DOMAIN "PHP Fatal error" | "PHP Warning"'><span class="dork-text">PHP Errors</span></button><button class="copy-btn hacker-btn px-3 py-1 rounded-md text-sm">Copy</button></div>
                    <div class="dork-item p-2 flex items-center justify-between"><button class="w-full text-left p-2" data-dork='intext:"sql syntax near" | intext:"syntax error has occurred" site:TARGET_DOMAIN'><span class="dork-text">SQL Errors</span></button><button class="copy-btn hacker-btn px-3 py-1 rounded-md text-sm">Copy</button></div>
                    <div class="dork-item p-2 flex items-center justify-between"><button class="w-full text-left p-2" data-dork='site:TARGET_DOMAIN inurl:/proc/self/cwd'><span class="dork-text">LFI/Path Traversal</span></button><button class="copy-btn hacker-btn px-3 py-1 rounded-md text-sm">Copy</button></div>
                </div>
            </div>
        </div>

      </div>
    </main>

    <footer class="text-center mt-12 text-gray-500">
        <p>// Happy Hacking! Use responsibly and with authorization. //</p>
        <p class="mt-4 text-sm italic">Made with <span class="text-red-500">&hearts;</span> by 4n1_1p4m</p>
        <div class="flex justify-center items-center space-x-6 mt-4">
            <a href="https://www.linkedin.com/in/anupamjaiswall" target="_blank" rel="noopener noreferrer" class="social-icon">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path><rect x="2" y="9" width="4" height="12"></rect><circle cx="4" cy="4" r="2"></circle></svg>
            </a>
            <a href="https://github.com/anupamjaiswall" target="_blank" rel="noopener noreferrer" class="social-icon">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg>
            </a>
            <a href="https://www.instagram.com/anupamjaiswall" target="_blank" rel="noopener noreferrer" class="social-icon">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="2" width="20" height="20" rx="5" ry="5"></rect><path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"></path><line x1="17.5" y1="6.5" x2="17.51" y2="6.5"></line></svg>
            </a>
            <a href="https://www.buymeacoffee.com/anupamjaiswall" target="_blank" rel="noopener noreferrer" class="social-icon">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 8h1a4 4 0 0 1 0 8h-1"></path><path d="M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"></path><line x1="6" y1="1" x2="6" y2="4"></line><line x1="10" y1="1" x2="10" y2="4"></line><line x1="14" y1="1" x2="14" y2="4"></line></svg>
            </a>
        </div>
    </footer>
  </div>
  
  <!-- Live2D Widget Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/live2d-widget@3.1.4/lib/L2Dwidget.min.js"></script>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      // --- Element Selectors ---
      const mainContainer = document.querySelector('.container');
      const disclaimerModal = document.getElementById('disclaimer-modal');
      const agreeBtn = document.getElementById('agree-btn');
      const mainContent = document.getElementById('main-content');
      const targetInput = document.getElementById('target-input');
      const errorMessage = document.getElementById('error-message');
      
      const reconModeTabs = document.querySelectorAll('#recon-mode-tabs .tab-btn');
      
      const profilerResultsContainer = document.getElementById('profiler-results-container');
      const profilerStatus = document.getElementById('profiler-status');
      const profilerResultsList = document.getElementById('profiler-results-list');
      
      const techResultsContainer = document.getElementById('tech-results-container');
      const techStatus = document.getElementById('tech-status');
      const techResultsList = document.getElementById('tech-results-list');

      const toggleDorkingBtn = document.getElementById('toggle-dorking-modules');
      const dorkingContainer = document.getElementById('dorking-modules-container');

      const historyContainer = document.getElementById('history-container');
      
      const workspaceSubdomains = document.getElementById('workspace-subdomains');
      const workspaceEmails = document.getElementById('workspace-emails');
      const workspaceIps = document.getElementById('workspace-ips');
      const workspaceUrls = document.getElementById('workspace-urls');
      const workspaceNotes = document.getElementById('workspace-notes');
      const workspaceElements = [workspaceSubdomains, workspaceEmails, workspaceIps, workspaceUrls, workspaceNotes];

      const sidebar = document.getElementById('sidebar');
      
      let history = JSON.parse(localStorage.getItem('nexusReconHistory')) || [];

      // --- External Tools Data ---
      const externalButtonsData = {
        'external-virustotal': { url: 'https://www.virustotal.com/gui/domain/TARGET_QUERY', name: 'VirusTotal' },
        'external-censys': { url: 'https://search.censys.io/search?resource=hosts&q=TARGET_QUERY', name: 'Censys' },
        'external-shodan': { url: 'https://www.shodan.io/search?query=TARGET_QUERY', name: 'Shodan' },
        'external-netlas': { url: 'https://app.netlas.io/host/TARGET_QUERY/', name: 'Netlas.io' },
        'external-fofa': { url: 'https://en.fofa.info/result?qbase64=FOFA_B64_QUERY', name: 'FOFA' },
        'external-zoomeye': { url: 'https://www.zoomeye.org/searchResult?q=TARGET_QUERY', name: 'ZoomEye' },
        'external-securityheaders': { url: 'https://securityheaders.com/?q=TARGET_QUERY&followRedirects=on', name: 'SecurityHeaders.io' },
        'external-crtsh': { url: 'https://crt.sh/?q=TARGET_QUERY', name: 'crt.sh' },
        'external-dnsdumpster': { url: 'https://dnsdumpster.com/', name: 'DNSdumpster' },
        'external-viewdns': { url: 'https://viewdns.info/whois/?domain=TARGET_QUERY', name: 'ViewDNS.info' },
        'external-whois': { url: 'https://who.is/whois/TARGET_QUERY', name: 'who.is' },
        'external-rapiddns': { url: 'https://rapiddns.io/subdomain/TARGET_QUERY', name: 'RapidDNS' },
        'external-github': { url: 'https://github.com/search?q="TARGET_QUERY"&type=code', name: 'GitHub Search' },
        'external-pastebin': { url: 'https://www.google.com/search?q=site:pastebin.com "TARGET_QUERY"', name: 'Pastebin Search' },
        'external-leakix': { url: 'https://leakix.net/search?q=TARGET_QUERY', name: 'LeakIX' },
        'external-grepapp': { url: 'https://grep.app/?q=TARGET_QUERY', name: 'Grep.app' },
        'external-searchcode': { url: 'https://searchcode.com/?q=TARGET_QUERY', name: 'Searchcode' },
        'external-grayhat': { url: 'https://buckets.grayhatwarfare.com/files?keywords=TARGET_QUERY', name: 'Grayhat Warfare' },
        'external-dehashed': { url: 'https://www.dehashed.com/search?query=domain%3ATARGET_QUERY', name: 'Dehashed' },
        'external-haveibeenpwned': { url: 'https://haveibeenpwned.com/', name: 'HaveIBeenPwned' },
        'external-wayback': { url: 'https://web.archive.org/web/*/TARGET_QUERY', name: 'Waybackurls' },
        'external-urlscan': { url: 'https://urlscan.io/search/#TARGET_QUERY', name: 'urlscan.io' },
        'external-builtwith': { url: 'https://builtwith.com/?TARGET_QUERY', name: 'BuiltWith' },
        'external-publicwww': { url: 'https://publicwww.com/websites/%22TARGET_QUERY%22/', name: 'PublicWWW' },
        'external-hunter': { url: 'https://hunter.io/search?domain=TARGET_QUERY', name: 'Hunter.io' },
        'external-emailrep': { url: 'https://emailrep.io/', name: 'EmailRep.io' },
        'external-linkedin': { url: 'https://www.google.com/search?q=site:linkedin.com/in "TARGET_QUERY"', name: 'LinkedIn Search' },
        'external-crunchbase': { url: 'https://www.crunchbase.com/textsearch?q=TARGET_QUERY', name: 'Crunchbase' },
        'external-greynoise': { url: 'https://viz.greynoise.io/query?gnql=TARGET_QUERY', name: 'GreyNoise' },
        'external-whatsmynameweb': { url: 'https://whatsmyname.app/?q=TARGET_QUERY', name: 'WhatsMyName' },
        'external-truecaller': { url: 'https://www.truecaller.com/search/in/TARGET_QUERY', name: 'Truecaller' },
        'external-syncme': { url: 'https://sync.me/search/?number=TARGET_QUERY', name: 'Sync.me' },
        'external-yandex': { url: 'https://yandex.com/search/?text=TARGET_QUERY', name: 'Yandex' },
        'external-ahmia': { url: 'https://ahmia.fi/search/?q=TARGET_QUERY', name: 'Ahmia.fi' }
      };

      // --- Core Functions ---
      const getActiveTarget = () => targetInput.value.trim();

      const handleMissingTarget = () => {
          errorMessage.textContent = 'ERROR: Target required for this action.';
          errorMessage.classList.remove('hidden');
          targetInput.scrollIntoView({ behavior: 'smooth', block: 'center' });
          targetInput.classList.add('shake-error');
          setTimeout(() => targetInput.classList.remove('shake-error'), 820);
      };

      const typeEffect = (element, text, speed = 50, callback) => {
        element.textContent = "";
        let i = 0;
        const timer = setInterval(() => {
            if (i < text.length) {
                element.textContent += text.charAt(i);
                i++;
            } else {
                clearInterval(timer);
                if (callback) callback();
            }
        }, speed);
      };

      // --- History Functions ---
      const addHistoryEntry = (action, target, note = '') => {
          const entry = { id: Date.now(), time: new Date().toLocaleTimeString(), action, target, note };
          history.unshift(entry);
          if (history.length > 50) history.pop();
          localStorage.setItem('nexusReconHistory', JSON.stringify(history));
          renderHistory();
      };
      
      const renderHistory = () => {
          if (!historyContainer) return;
          historyContainer.innerHTML = history.length === 0 
              ? '<p class="text-gray-500 italic">// No activity yet...</p>'
              : history.map(entry => `
                  <div class="bg-black/30 p-3 rounded-md border border-fuchsia-500/30">
                    <p class="text-sm"><span class="text-gray-500">[${entry.time}]</span> Used <span class="text-fuchsia-400">${entry.action}</span> on <span class="text-cyan-400">${entry.target}</span></p>
                    <textarea class="note-input w-full mt-2 p-2 text-xs rounded-md bg-black/50 border-fuchsia-500/50" data-id="${entry.id}" placeholder="// Add notes...">${entry.note}</textarea>
                  </div>
                `).join('');
      };

      // --- Workspace Functions ---
      const saveWorkspaceData = () => {
          const target = getActiveTarget();
          if (!target) return;
          const data = {
              subdomains: workspaceSubdomains.value,
              emails: workspaceEmails.value,
              ips: workspaceIps.value,
              urls: workspaceUrls.value,
              notes: workspaceNotes.value,
          };
          localStorage.setItem(`nexusWorkspace_${target}`, JSON.stringify(data));
      };

      const loadWorkspaceData = () => {
          const target = getActiveTarget();
          const data = JSON.parse(localStorage.getItem(`nexusWorkspace_${target}`)) || {};
          workspaceSubdomains.value = data.subdomains || '';
          workspaceEmails.value = data.emails || '';
          workspaceIps.value = data.ips || '';
          workspaceUrls.value = data.urls || '';
          workspaceNotes.value = data.notes || '';
      };

      // --- Recon Mode Switching ---
      const setReconMode = (mode) => {
          reconModeTabs.forEach(t => t.classList.toggle('active', t.dataset.mode === mode));
          targetInput.placeholder = mode === 'website' 
              ? 'Enter Domain or Company...' 
              : 'Enter Username, Email, or Phone...';

          document.querySelectorAll('[data-recon-type]').forEach(module => {
              const type = module.dataset.reconType;
              module.style.display = (type === 'all' || type === mode) ? '' : 'none';
          });
      };

      // --- Dork & Tool Execution ---
      const executeDork = (dorkTemplate, actionName) => {
        const target = getActiveTarget();
        if (!target) {
          handleMissingTarget();
          return;
        }
        errorMessage.classList.add('hidden');
        const finalDork = dorkTemplate.replace(/TARGET_DOMAIN/g, target);
        addHistoryEntry(actionName, target);
        window.open(`https://www.google.com/search?q=${encodeURIComponent(finalDork)}`, '_blank');
      };

      const copyDork = (dorkTemplate, copyBtn) => {
        const target = getActiveTarget();
        if (!target) {
          handleMissingTarget();
          return;
        }
        errorMessage.classList.add('hidden');
        const finalDork = dorkTemplate.replace(/TARGET_DOMAIN/g, target);
        
        navigator.clipboard.writeText(finalDork).then(() => {
          const originalText = copyBtn.textContent;
          copyBtn.textContent = 'Copied!';
          copyBtn.style.backgroundColor = '#ff00c1'; // Magenta feedback
          copyBtn.style.borderColor = '#ff00c1';
          setTimeout(() => {
              copyBtn.textContent = originalText;
              copyBtn.style.backgroundColor = '';
              copyBtn.style.borderColor = '';
          }, 1500);
        }).catch(err => {
          console.error('Failed to copy text: ', err);
          copyBtn.textContent = 'Error!';
          setTimeout(() => copyBtn.textContent = 'Copy', 1500);
        });
      };

      const openExternalTool = (urlTemplate, toolName) => {
        const target = getActiveTarget();
        if(!target) {
          handleMissingTarget();
          return;
        }
        addHistoryEntry(toolName, target);
        let finalUrl = urlTemplate;
        if (urlTemplate.includes('FOFA_B64_QUERY')) {
            const query = btoa(`domain="${target}"`);
            finalUrl = urlTemplate.replace('FOFA_B64_QUERY', query);
        } else {
            finalUrl = urlTemplate.replace(/TARGET_QUERY/g, encodeURIComponent(target));
        }
        window.open(finalUrl, '_blank');
      };
      
      // --- EVENT DELEGATION ---
      document.body.addEventListener('click', (e) => {
          const target = e.target;
          const targetId = target.id;
          
          // Sidebar Toggle
          if (target.closest('#sidebar-toggle')) {
              sidebar.classList.add('open');
          }
          if (target.closest('#sidebar-close')) {
              sidebar.classList.remove('open');
          }

          // Dork Items
          const dorkItem = target.closest('.dork-item');
          if (dorkItem) {
              const dorkButton = dorkItem.querySelector('button[data-dork]');
              const copyButton = dorkItem.querySelector('.copy-btn');
              if (target.closest('.copy-btn')) {
                  copyDork(dorkButton.dataset.dork, copyButton);
              } else {
                  executeDork(dorkButton.dataset.dork, dorkButton.textContent.trim());
              }
          }

          // External Tools
          if (target.closest('.dork-grid button[id^="external-"]')) {
              const toolData = externalButtonsData[target.id];
              if (toolData) {
                  openExternalTool(toolData.url, toolData.name);
              }
          }

          // Other buttons by ID
          switch(targetId) {
              case 'clear-target':
                  targetInput.value = '';
                  errorMessage.classList.add('hidden');
                  loadWorkspaceData();
                  break;
              case 'initiate-profile':
                  const profilerTarget = getActiveTarget();
                  if (!profilerTarget) { handleMissingTarget(); return; }
                  addHistoryEntry('Automated Profiler', profilerTarget);
                  profilerResultsContainer.classList.remove('hidden');
                  profilerResultsList.innerHTML = '';
                  profilerStatus.textContent = `>> Scanning [${profilerTarget}]... Stand by...`;
                  const profilerDorks = [
                      { name: 'Subdomain Scan', dork: 'site:*.TARGET_DOMAIN -site:www.TARGET_DOMAIN' },
                      { name: 'Login Portals', dork: 'site:TARGET_DOMAIN inurl:login | inurl:signin' },
                      { name: 'Config Files', dork: 'site:TARGET_DOMAIN ext:xml | ext:conf | ext:ini | ext:log' },
                      { name: 'Public Cloud Buckets', dork: 'site:s3.amazonaws.com "TARGET_DOMAIN"' },
                      { name: 'Exposed Docs', dork: 'site:TARGET_DOMAIN ext:pdf | ext:docx "confidential"' }
                  ];
                  setTimeout(() => {
                    typeEffect(profilerStatus, `>> Profile for [${profilerTarget}] complete:`, 30, () => {
                        profilerDorks.forEach((item, index) => {
                            setTimeout(() => {
                                const finalDork = item.dork.replace(/TARGET_DOMAIN/g, profilerTarget);
                                const searchUrl = `https://www.google.com/search?q=${encodeURIComponent(finalDork)}`;
                                profilerResultsList.innerHTML += `<div class="flex justify-between items-center"><span>- ${item.name}.......</span><a href="${searchUrl}" target="_blank" class="hacker-btn text-sm px-3 py-1 rounded-md">[ View Results ]</a></div>`;
                            }, index * 100);
                        });
                    });
                  }, 1000);
                break;
              case 'identify-tech':
                  const techTarget = getActiveTarget();
                  if (!techTarget) { handleMissingTarget(); return; }
                  addHistoryEntry('Tech-Stack Identifier', techTarget);
                  techResultsContainer.classList.remove('hidden');
                  techResultsList.innerHTML = '';
                  techStatus.textContent = `>> Identifying tech for [${techTarget}]...`;
                  const techDorks = [
                      { name: 'WordPress', dork: 'site:TARGET_DOMAIN inurl:wp-content | inurl:wp-admin' },
                      { name: 'Joomla', dork: 'site:TARGET_DOMAIN intext:"Powered by Joomla"' },
                      { name: 'Drupal', dork: 'site:TARGET_DOMAIN intext:"Powered by Drupal"' },
                      { name: 'Shopify', dork: 'site:TARGET_DOMAIN inurl:myshopify.com' },
                      { name: 'Apache Struts', dork: 'site:TARGET_DOMAIN filetype:action | filetype:do' },
                      { name: 'Adobe AEM', dork: 'site:TARGET_DOMAIN inurl:/content/dam' }
                  ];
                  setTimeout(() => {
                    typeEffect(techStatus, `>> Tech stack scan for [${techTarget}] complete:`, 30, () => {
                        techDorks.forEach((tech, index) => {
                            setTimeout(() => {
                                const finalDork = tech.dork.replace(/TARGET_DOMAIN/g, techTarget);
                                const searchUrl = `https://www.google.com/search?q=${encodeURIComponent(finalDork)}`;
                                techResultsList.innerHTML += `<div class="flex justify-between items-center"><span>- ${tech.name}.......</span><a href="${searchUrl}" target="_blank" class="hacker-btn text-sm px-3 py-1 rounded-md">[ Check ]</a></div>`;
                            }, index * 100);
                        });
                    });
                  }, 1000);
                break;
              case 'favicon-pivot':
                  openExternalTool('https://www.shodan.io/search?query=http.html:"TARGET_QUERY"', 'Favicon Pivot');
                  break;
              case 'toggle-dorking-modules':
                  const isHidden = dorkingContainer.classList.toggle('hidden');
                  target.textContent = isHidden ? '[ Show Google Dorking Modules ]' : '[ Hide Google Dorking Modules ]';
                  if(!isHidden) setTimeout(() => dorkingContainer.scrollIntoView({ behavior: 'smooth', block: 'start' }), 100);
                  break;
              case 'clear-workspace':
                  const currentTarget = getActiveTarget();
                  if (currentTarget) {
                      localStorage.removeItem(`nexusWorkspace_${currentTarget}`);
                      loadWorkspaceData();
                  }
                  break;
              case 'clear-history':
                  history = [];
                  localStorage.removeItem('nexusReconHistory');
                  renderHistory();
                  break;
          }
      });

      // --- Individual Listeners for Non-Delegated Actions ---
      
      // Recon Mode Tabs
      reconModeTabs.forEach(tab => {
          tab.addEventListener('click', () => {
              setReconMode(tab.dataset.mode);
              loadWorkspaceData();
          });
      });

      // Target Input
      targetInput.addEventListener('change', loadWorkspaceData);

      // Workspace & History textareas
      workspaceElements.forEach(el => el.addEventListener('blur', saveWorkspaceData));
      historyContainer.addEventListener('change', (e) => {
          if (e.target.classList.contains('note-input')) {
              const entry = history.find(item => item.id === Number(e.target.dataset.id));
              if (entry) {
                  entry.note = e.target.value;
                  localStorage.setItem('nexusReconHistory', JSON.stringify(history));
              }
          }
      });

      // --- Initial Page Load ---
      mainContainer.classList.add('content-hidden');
      agreeBtn.addEventListener('click', () => {
          disclaimerModal.style.display = 'none';
          mainContainer.classList.remove('content-hidden');
          
          // Initialize Live2D Widget AFTER user agrees
          try {
            L2Dwidget.init({
                "model": { "jsonPath": "https://cdn.jsdelivr.net/npm/live2d-widget-model-tororo@1.0.5/assets/tororo.model.json" },
                "display": { "position": "right", "width": 200, "height": 400, "hOffset": -50, "vOffset": -100 },
                "mobile": { "show": true, "scale": 0.5, "hOffset": -20, "vOffset": -40 },
                "dialog": { "enable": true, "script": { 'tap body': 'Hey! Stop that!' } },
                "react": { "opacityDefault": 0.85, "opacityOnHover": 1 },
                "eyeTrack": true,
            });
          } catch(e) {
            console.error("Live2D widget failed to load:", e);
          }
      });

      renderHistory();
      loadWorkspaceData();
      setReconMode('website');
      
        // --- Cursor and Trail Logic ---
      const cursor = document.querySelector('.cursor');
      let mouseX = 0;
      let mouseY = 0;
      let lastTrailTime = 0;
      const trailDelay = 50; 

      function updateCursor() {
          cursor.style.left = `${mouseX}px`;
          cursor.style.top = `${mouseY}px`;
          requestAnimationFrame(updateCursor);
      }

      document.addEventListener('mousemove', (e) => {
          mouseX = e.clientX;
          mouseY = e.clientY;
          const currentTime = Date.now();
          if (currentTime - lastTrailTime > trailDelay) {
              createTrail(e.clientX, e.clientY);
              lastTrailTime = currentTime;
          }
      });

      function createTrail(x, y) {
          const trail = document.createElement('span');
          trail.className = 'trail';
          trail.innerText = Math.random() < 0.5 ? '0' : '1';
          trail.style.left = `${x}px`;
          trail.style.top = `${y}px`;
          document.body.appendChild(trail);
          trail.addEventListener('animationend', () => {
              trail.remove();
          });
      }
      
      requestAnimationFrame(updateCursor);

      // --- Click Ripple Animation ---
      document.addEventListener('click', (e) => {
          // Don't fire on scrollbar clicks
          if (e.clientX >= document.documentElement.clientWidth || e.clientY >= document.documentElement.clientHeight) {
              return;
          }
          
          const ripple = document.createElement('div');
          ripple.className = 'click-effect';
          document.body.appendChild(ripple);

          ripple.style.top = `${e.clientY}px`;
          ripple.style.left = `${e.clientX}px`;

          // Clean up the element after the animation is done to prevent DOM clutter
          ripple.addEventListener('animationend', () => {
              ripple.remove();
          });
      });
      
    });
  </script>

</body>
</html>
